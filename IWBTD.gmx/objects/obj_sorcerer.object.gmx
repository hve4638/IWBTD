<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_sorcerer</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-9</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>MAXHP=400; HP=400;
MAXSHIELD=500; SHIELD=500;
ARMOR=1;
onhealth=true;
drawhp=0; drawsd=SHIELD;
onshield=true;

image_speed=0;

inv=false;
phase=0;

D=0; S=1;
follow=0;
xx=x;
start=1;

hit=0;
nx_shd=false;
shd=noone;

nx_p=noone;
pv_p=noone;

ds=0;
dsx=0; dsy=0;

t=-1; //ds tmp;

B=1;

scp_pattern_create(3,tin_boss6a,tin_boss6b,tin_boss6c);

T=0; A=1;
aftx=ds_list_create();
afty=ds_list_create();
afta=ds_list_create();

ondie=0;

for(var i=0;i&lt;10;i++) {
    ds_list_add(aftx,-999);
    ds_list_add(afty,-999);
    ds_list_add(afta,1);
}

circle_index=0;
circle_time=0;
circle_angle=0;
circle_alpha=0;

pp=-1;

beam=1;
be=0; bs=0;

with(sys_global) {vname=es('boss','mage'); vtime=100;}
alarm[1]=30;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>scp_pattern_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_user(0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !instance_exists(obj_player) exit;
scp_timeline(nx_p);
pv_p=nx_p;

/*
if start {
    tp=tin_boss6a;
    start=false;
}
else {
    if nx_shd {
        tp=tin_boss6_shieldgain;
        nx_shd=false;
    } else do {
        if phase==0 tp=choose(tin_boss6a,tin_boss6b,tin_boss6c);
        else if phase==1 tp=choose(tin_boss6a,tin_boss6b,tin_boss6c,tin_boss6d,tin_boss6e);
        else tp=choose(tin_boss6a,tin_boss6c_2,tin_boss6d,tin_boss6e);
    } until (tp!=pp)
}
if instance_exists(obj_player) scp_timeline(tp);
pp=tp;

//scp_timeline(tin_boss6d);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if B {if x&lt;Me.x image_xscale=-1; else image_xscale=1;}
if follow &amp;&amp; scp_follow(clamp(xx,48,room_width-48),y,12)==0 follow=false;

if S {
    direction=90;
    if D {
        if 0.2&lt;speed {D=!D;}
        speed+=0.01;
    }
    else {
        if speed&lt;-0.2 {D=!D;}
        speed-=0.01;
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Phase Set
if phase==0 &amp;&amp; instance_exists(shd) {shd.x=x; shd.y=y+8;}
if phase==0 || phase==1 with(sys_lighting) {if sys_lighting.val&lt;110 sys_lighting.val+=1;}
else if phase==2 with(sys_lighting) {if sys_lighting.val&lt;140 sys_lighting.val+=0.3;}
else if phase==3 with(sys_lighting) {if sys_lighting.val&lt;160 sys_lighting.val+=0.3;}
else if phase==-1 with(sys_lighting) {if 10&lt;sys_lighting.val sys_lighting.val-=0.5;}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///SHIELD
if 1&lt;circle_time onshield=false;
else if circle_time==1 onshield=true;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Particle
if ds
with(sys_part) {
    if ++prt[33]==0 event_user(0);
    part_emitter_region(Sys[33],emitter[33],other.dsx+46,other.dsx-46,other.dsy+45,other.dsy-45,0,1);
    part_emitter_burst(Sys[33],emitter[33],particle[33],20);
}

if ondie 
with(sys_part) {
    if ++prt[57]==0 event_user(0);
    part_system_depth(Sys[57],-100);
    part_emitter_region(Sys[57],emitter[57],other.x,other.x,other.y+12,other.y+12,ps_shape_ellipse,1);
    part_emitter_burst(Sys[57],emitter[57],particle[57],24);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if onhealth &amp;&amp; !inv {
    audio_play_sound(snd_BossHit,0,0);
    with(other) {instance_destroy();}
    if onshield &amp;&amp; 0&lt;SHIELD SHIELD-=DEAL*10;
    else {
        if 0&lt;SHIELD HP-=DEAL;
        else HP-=DEAL*ARMOR*2;
    }
    
    if HP&lt;=0 {
        scp_bosskill(4);
        audio_stop_sound(perbgm);
        
        ongod=true;
        cansave=false;
        
        var i=instance_create(1184,0,obj_teleport);
        with(i) {
            image_xscale=2;
            image_yscale=16;
            type=0; GOTO=rmstage04e;
        }
        with(inst_5449854B) instance_destroy(); //block
        onhealth=false;
        
        scp_timeline(tin_boss6_death);
    }
    
    if onshield &amp;&amp; 0&lt;SHIELD {
        if instance_exists(shd) {
            shd.x=x;
            shd.y=y+8;
            shd.image_alpha=0.5;
            shd.ktime=10;
        } else {
            shd=instance_create(x,y+8,obj_charge);
            shd.image_xscale=2; shd.image_yscale=2;
            shd.image_alpha=0.5; shd.image_blend=c_purple;
            shd.get_alpha=-0.05; shd.depth=-12;
            shd.ktime=10;
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !instance_exists(obj_player) exit;
var isshd, r;
if Me.x&lt;320 r=-1;
else if 1216-320&lt;Me.x r=1;
else r=choose(1,-1);

if phase==0 &amp;&amp; (SHIELD&lt;=0 || HP/MAXHP&lt;=0.75) {
    scp_pattern_reset(5,tin_boss6a,tin_boss6b,tin_boss6c,tin_boss6d,tin_boss6e);
    phase=1;
}

if phase==1 &amp;&amp; HP/MAXHP&lt;=0.66 {
    phase=2; isshd=true;
} else if phase==2 &amp;&amp; HP/MAXHP&lt;=0.33 {
    scp_pattern_reset(4,tin_boss6a,tin_boss6c_2,tin_boss6d,tin_boss6e);
    phase=3; isshd=true;
    ARMOR=0.5;
} else isshd=false;


follow=true;

if start {
    start=false;
    
    xx=clamp(Me.x+160,96,room_width-96);
    nx_p=tin_boss6a;
}
else {
    xx=clamp(Me.x+160*r,96,room_width-96);
    if isshd {
        follow=false;
        nx_p=tin_boss6_shieldgain;
    }
    else do {nx_p=scp_pattern_rand();} until(pv_p!=nx_p)
}

if phase==3 alarm[0]=60;
else alarm[0]=75;

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="73">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Last
/*
var k, rh;
rh=480;
var i, j;
var k=point_direction(x,y,mouse_x,mouse_y)+90;
draw_sprite_ext(spr_ebeam,0,x,y,1,1,k,c_white,1);
draw_set_colour(c_white);
for(i=0;i&lt;room_width;i++) {
    j=0;
    var d=point_direction(x,y,i,j);
    if (bs&lt;=be &amp;&amp; bs&lt;=d &amp;&amp; d&lt;=be) || (be&lt;bs &amp;&amp; (d&lt;=bs || be&lt;=d)) {
        draw_line(i,j,x,y);
    }
    
    j=rh;
    var d=point_direction(x,y,i,j);
    if (bs&lt;=be &amp;&amp; bs&lt;=d &amp;&amp; d&lt;=be) || (be&lt;bs &amp;&amp; (d&lt;=bs || be&lt;=d)) {
        draw_line(i,j,x,y);
    }
}

for(j=0;j&lt;rh;j++) {
    i=0;
    var d=point_direction(x,y,i,j);
    if (bs&lt;=be &amp;&amp; bs&lt;=d &amp;&amp; d&lt;=be) || (be&lt;bs &amp;&amp; (d&lt;=bs || be&lt;=d)) {
        draw_line(i,j,x,y);
    }
    
    i=room_width;
    var d=point_direction(x,y,i,j);
    if (bs&lt;=be &amp;&amp; bs&lt;=d &amp;&amp; d&lt;=be) || (be&lt;bs &amp;&amp; (d&lt;=bs || be&lt;=d)) {
        draw_line(i,j,x,y);
    }
}


</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Health
if onhealth {
    var vx, vy;
    vx=view_xview;
    vy=view_yview;
    
    

    if HP!=drawhp {
        //if abs(drawhp-HP)&lt;0.5 {drawhp=HP;}
        drawhp+=(HP-drawhp)/10;
    }
    if SHIELD!=drawsd {
        //if abs(drawsd-SHIELD)&lt;0.5 {drawsd=SHIELD;}
        drawsd+=(SHIELD-drawsd)/10;
    }
    
    
    _p=739*(drawhp/MAXHP);
    draw_sprite_ext(spr_bar,0,vx+30,vy+32,1,1,0,c_white,1);
    draw_sprite_part_ext(spr_bar,8,0,0,_p,16,vx+30,vy+32,1,1,c_white,1);
    draw_sprite_ext(spr_bar,1,vx+30,vy+32,1,1,0,c_white,1);
    
    var bx, by;
    bx=400-200;
    by=50+4;
    
    _q=400*(drawsd/MAXSHIELD);
    draw_sprite_ext(spr_bar2,1,vx+bx,vy+by,1,1,0,c_white,1);
    draw_sprite_part_ext(spr_bar2,2,0,0,_q,16,vx+bx,vy+by,1,1,c_white,1);
    draw_sprite_ext(spr_bar2,0,vx+bx,vy+by,1,1,0,c_white,1);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if A {
    psize=ds_list_size(aftx);
    
    for(var i=psize-1;0&lt;=i;i--) {
        var px, py, pa;
        px=ds_list_find_value(aftx,i);
        py=ds_list_find_value(afty,i);
        pa=ds_list_find_value(afta,i);
        draw_sprite_ext(spr_sorcerer_echo,0,px,py,pa,1,0,c_white,(i+1)/psize * 0.2);
    }
    
    if T++ mod 5 == 0 {
        ds_list_delete(aftx,0);
        ds_list_delete(afty,0);
        ds_list_delete(afta,0);
        ds_list_add(aftx,x);
        ds_list_add(afty,y);
        ds_list_add(afta,image_xscale);
    }
}


if 0&lt;circle_time {
    if 12&lt;circle_time circle_alpha+=0.1;
    else circle_alpha-=0.1;
    
    draw_sprite_ext(spr_circle2,circle_index,x,y+8,circle_alpha*1.5,circle_alpha*1.5,circle_angle,c_white,circle_alpha);
    circle_alpha=clamp(circle_alpha,0,1);
    circle_angle+=4;
    circle_time--;
}

draw_self();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
