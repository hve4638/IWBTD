<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_vampire</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-15</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>MAXHP=450;
HP=450;
ARMOR=1;
onhealth=true;
drawhp=0;
inv=false;

phase=0;

image_speed=0;
ds_tmp=-1;
ds_mid=ds_list_create();
ds_list_add(ds_mid,tin_boss7h,tin_boss7i,tin_boss7j,tin_boss7k);
ds_list_shuffle(ds_mid);

front=0;
fade_set=0; fade_get=0;
fade_min=0; fade_max=1; fade_col=0;

nx_p=noone;

tp_t=0;
tp_x=x;

onxscale=0;

issnd=0;


K=0;

onfirerain=0;

bg_a=1;

onfield=0;
onfield_x1=0;
onfield_x2=0;

onblood=0;
ondarker=0;
oncurse=0;
ondark=0;

onabs=0;
onabs_p=0;

onholy=0;



I=0;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Begin
if perbgm!=snd_Boss5 &amp;&amp; audio_is_playing(perbgm) audio_stop_sound(perbgm);
perbgm=snd_Boss5;
if bgmset = true {
    if audio_is_playing(perbgm) audio_stop_sound(perbgm);
    audio_play_sound(perbgm,0,1);
    audio_sound_gain(perbgm, 1, 0);
}


with(sys_global) {vname=es('boss','vampire'); vtime=100;}
alarm[1]=50;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Debug
str="";
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="1" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_user(1);
if ds_exists(ds_mid,ds_type_list) ds_list_destroy(ds_mid);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="1">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>event_user(0);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Pattern
if !instance_exists(obj_player) exit;
if nx_p!=noone scp_timeline(nx_p);
//scp_timeline(tin_boss7b_2);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Fade
fade_set=clamp(fade_set+fade_get,fade_min,fade_max);
with(obj_player) {
    hp_alp=clamp(hp_alp-other.fade_get,other.fade_min,other.fade_max);
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Particle
if onblood with(sys_part) {
    if ++prt[43]==0 event_user(0);
    part_emitter_region(Sys[43],emitter[43],other.x+24,other.x-24,other.y+60,other.y-30,1,0);
    part_emitter_burst(Sys[43],emitter[43],particle[43],4);
}

if ondark &amp;&amp; I mod 5 == 0 {
    with(sys_part) {
        if ++prt[42]==0 event_user(0);
        part_emitter_region(Sys[42],emitter[42],other.x+24,other.x-24,other.y+60,other.y-60,1,0);
        part_emitter_burst(Sys[42],emitter[42],particle[42],1);
    }
}

if ondarker {
    with(sys_part) {
        if ++prt[46]==0 event_user(0);
        part_emitter_region(Sys[46],emitter[46],other.x+14,other.x-14,other.y+12,other.y-12,1,1);
        part_emitter_burst(Sys[46],emitter[46],particle[46],5);
    }
}

if onfield {
    with(sys_part) {
        if ++prt[15]==0 event_user(0);
        part_system_depth(Sys[15],-17);
        part_type_color1(particle[15],make_colour_rgb(149,0,0));
        part_emitter_region(Sys[15],emitter[15],other.onfield_x1,other.onfield_x2,434,454,1,0);
        part_emitter_burst(Sys[15],emitter[15],particle[15],10);
    }
}

/*if oncurse {
    with(sys_part) {
        if ++prt[45]==0 event_user(0);
        part_emitter_region(Sys[45],emitter[45],Me.x+10,Me.x-10,Me.y-25,Me.y-15,2,1);
        part_emitter_burst(Sys[45],emitter[45],particle[45],10);
    }
}*/

if bg_a {
    with(sys_part) {
        if ++prt[44]==0 event_user(0);
        part_emitter_region(Sys[44],emitter[44],0,800,460,472,1,0);
        part_emitter_burst(Sys[44],emitter[44],particle[44],1);
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Blood
if 0&lt;tp_t {
    if tp_t==1 {ondark=false;}
    else if tp_t==10 {onblood=true;}
    else if 25&lt;tp_t &amp;&amp; tp_t&lt;60 {image_alpha-=0.03;}
    else if tp_t==60 {onblood=false; image_alpha=0;}
    else if tp_t==85 {
        x=tp_x;
        onblood=true;
        onxscale=1
    }
    else if 100&lt;tp_t &amp;&amp; tp_t&lt;150 {
        if tp_t==125 onblood=0;
        image_alpha+=0.02;
    }
    else if tp_t==150 {
        image_alpha=1;
        alarm[0]=30;
        ondark=true;
        tp_t=-1;
    }
    
    tp_t++;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Step
if onxscale {
    var xs=sign(x-Me.x);
    if xs==0 xs=1;
    image_xscale=xs;
}

if bg_a background_alpha[2]-=0.02;

if onabs {Me.adhspd=sign(x-Me.x)*2.6;}

if onabs_p {
    var i=instance_create(x+irandom_range(-150,150),y+irandom_range(-100,100),obj_dust);
    i.target=id;
}

if onfirerain &amp;&amp; I mod 2 {
    var i=instance_create(irandom_range(0,800),-32,obj_firerain);
    i.speed=irandom_range(6,12);
    i.direction=270;
    
    //scp_sfx(snd_magic,3);
    timeline_position--;
}
if issnd {audio_play_sound(snd_magic,0,0); issnd=0;}

if onholy &amp;&amp; I mod 33 == 0 {
    switch(irandom(3)) {
        case 1: {
            var j=instance_create(x-image_xscale*24,432-32*0,obj_fireball); with(j) {direction=90+other.image_xscale*90; speed=1;}
            var j=instance_create(x-image_xscale*24,432-32*3,obj_fireball); with(j) {direction=90+other.image_xscale*90; speed=1;}
        } break;
        case 2: {
            var j=instance_create(x-image_xscale*24,432-32*0,obj_fireball); with(j) {direction=90+other.image_xscale*90; speed=1;}
            var j=instance_create(x-image_xscale*24,432-32*1,obj_fireball); with(j) {direction=90+other.image_xscale*90; speed=1;}
        } break;
        case 3: {
            var j=instance_create(x-image_xscale*24,432-32*2,obj_fireball); with(j) {direction=90+other.image_xscale*90; speed=1;}
            var j=instance_create(x-image_xscale*24,432-32*1,obj_fireball); with(j) {direction=90+other.image_xscale*90; speed=1;}
        } break;
        case 0: {
            var j=instance_create(x-image_xscale*24,432-32*3,obj_fireball); with(j) {direction=90+other.image_xscale*90; speed=1;}
            var j=instance_create(x-image_xscale*24,432-32*2,obj_fireball); with(j) {direction=90+other.image_xscale*90; speed=1;}
        } break;
    }
    with(obj_fireball) {
        image_index=1; get_alpha=0.1;
        get_speed=0.4; max_speed=16;
        type=-1; On=0; Del=true;
    } audio_play_sound(snd_magic,0,0);
}

with(sys_lighting) if 100&lt;val val--;



I++;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Debug
if cheat {
    if keyboard_check_pressed(ord('K')) {
        phase=4;
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_bullet">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Hit
if onhealth &amp;&amp; !inv &amp;&amp; 0.5&lt;image_alpha {
    audio_play_sound(snd_BossHit,0,0);
    with(other) {instance_destroy();}
    HP-=DEAL*ARMOR;
    
    if phase!=5 HP=max(HP,10);
    if HP&lt;0 {
        scp_bosskill(5);
        room_goto(rmsin2);
        instance_destroy();
    }
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="4" ename="obj_player">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if 0.5&lt;image_alpha scp_kill();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="11">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///ds_tmp destroy
if ds_exists(ds_tmp,ds_type_list) ds_list_destroy(ds_tmp);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///PhaseSet
if !instance_exists(obj_player) exit;
ARMOR=1;

if phase==0 &amp;&amp; HP/MAXHP&lt;0.9 phase=1;
if (phase==3 &amp;&amp; HP/MAXHP&lt;0.1) {
    with(sys_part) {
        if ++prt[44]==0 event_user(0);
        part_type_color1(particle[44],c_purple);
    }
    phase=4;
}


if 0&lt;phase &amp;&amp; phase&lt;=2 &amp;&amp; !instance_exists(obj_curse) {nx_p=tin_boss7_curse;}
else if phase==1 &amp;&amp; HP/MAXHP&lt;0.75 {
    nx_p=tin_boss7_r1;
    phase=2;
    tp_x=400;
}
else if phase==2 &amp;&amp; HP/MAXHP&lt;0.5 {
    nx_p=tin_boss7_r2;
    phase=3;
}
else if phase==0 nx_p=choose(tin_boss7a,tin_boss7b,tin_boss7c,tin_boss7d);
else if phase==1 || phase==2 nx_p=choose(tin_boss7a,tin_boss7b,tin_boss7c,tin_boss7e,tin_boss7f,tin_boss7g);
else if phase==3 || phase==5 nx_p=choose(tin_boss7b_2,tin_boss7c,tin_boss7e_2,tin_boss7f,tin_boss7g_2);
else if phase==4 {
    ARMOR=0;
    if !ds_list_empty(ds_mid) {
        nx_p=ds_list_find_value(ds_mid,0);
        ds_list_delete(ds_mid,0);
        
        if x!=800-128 {
            tp_x=800-128;
            tp_t=1;
        } else {
            alarm[0]=100;
        }
        exit;
    } else {
        with(sys_part) {
            if ++prt[44]==0 event_user(0);
            part_type_color1(particle[44],128);
        }
        nx_p=choose(tin_boss7b_2,tin_boss7c,tin_boss7e_2,tin_boss7f,tin_boss7g_2);
        phase=5; ARMOR=1;
    }
}



if nx_p==tin_boss7e_2 {
    if x&lt;400 tp_x=800-128;
    else tp_x=128;
}else {
    if x&lt;400 tp_x=800-choose(128,192,224);
    else tp_x=choose(128,192,224);
}
tp_t=1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="5">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>instance_destroy();
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="73">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Effect
if oncurse draw_sprite(spr_effect_curse,I*0.6,Me.x,Me.y-25);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Health
if onhealth {
    var vx, vy;
    vx=view_xview;
    vy=view_yview;
    
    if HP!=drawhp {
     if abs(drawhp-HP)&lt;0.5 {drawhp=HP;}
     drawhp+=(HP-drawhp)/10;
    }
    
    _p=739*(drawhp/MAXHP);
    draw_sprite_ext(spr_bar,0,vx+30,vy+32,1,1,0,c_white,1);
    draw_sprite_part_ext(spr_bar,9,0,0,_p,16,vx+30,vy+32,1,1,c_white,1);
    draw_sprite_ext(spr_bar,1,vx+30,vy+32,1,1,0,c_white,1);
}
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if !front draw_self();

draw_set_colour(fade_col);
draw_set_alpha(fade_set);
draw_rectangle(view_xview,view_yview,view_xview+view_wview,view_yview+view_hview,0);
draw_set_alpha(1);

if front draw_self();
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
