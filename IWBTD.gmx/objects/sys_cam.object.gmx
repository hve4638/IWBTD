<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_tempcamera</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-1000</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>FollowBG=false;
SMOOTHBG_X=false;
SMOOTHBG_Y=false;

shake=0; stime=0;
rx=x; ry=y;
fade_set=0;
fade_get=0;
fade_col=c_black;

image_alpha=0;

xmin=0; xmax=room_width-800;
ymin=0; ymax=room_height-608;

MR=1; MX=8; MY=10;

Toangle=0;
mvang=0;

if instance_exists(obj_player){
    rx=floor(obj_player.x/800)*800;
    ry=floor(obj_player.y/608)*608;
}

if room==rmstage03a
|| room==rmstage03b
|| room==rmstage03c
    {FollowBG=true;}


with(obj_fakeplayer) {
    if image_alpha=0.9 {
        other.shake=16;
        other.stime=8;
        image_alpha=1;
    }
}


view_object[0]=sys_cam;
view_enabled=true;
view_wport[0]=800;
view_hport[0]=608;
view_wview[0]=800;
view_hview[0]=608;

view_vborder[0]=800;
view_hborder[0]=608;
view_vspeed[0]=-1;
view_hspeed[0]=-1;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///follow-view
var i=0;
with(target) {i=1;}

if i {
    if type=0 { //follow-target cam
        rx=target.x-mx/2;  ry=target.y-my/2;
        if rx&lt;0 {rx=0;} else if room_width-mx&lt;rx {rx=room_width-mx;}
        if ry&lt;0 {ry=0;} else if room_height-my&lt;ry {ry=room_height-my;}
    }
    
    else if type=1 { //room-cut cam 
        rx=floor(target.x/mx)*mx; ry=floor(target.y/my)*my;
    }
    
    else if type=2 { //follow-roomcut cam
        xx=floor(target.x/mx)*mx; yy=floor(target.y/my)*my;
        if rx+MR&lt;xx {rx+=point_distance(rx,0,xx,0)/MX;}// else if rx&lt;xx {rx=xx;}
        if rx-MR&gt;xx {rx-=point_distance(rx,0,xx,0)/MX;}// else if rx&gt;xx {rx=xx;}
        if ry+MR&lt;yy {ry+=point_distance(ry,0,yy,0)/MY;}// else if ry&lt;yy {ry=yy;} 
        if ry-MR&gt;yy {ry-=point_distance(ry,0,yy,0)/MY;}// else if ry&gt;yy {ry=yy;}
    }
    else if type=3 { //follow-variable cam
        xx=tx; yy=ty;
        if rx+MR&lt;xx {rx+=point_distance(rx,0,xx,0)/MX;} else if rx&lt;xx {rx=xx;}
        if rx-MR&gt;xx {rx-=point_distance(rx,0,xx,0)/MX;} else if rx&gt;xx {rx=xx;}
        if ry+MR&lt;yy {ry+=point_distance(ry,0,yy,0)/MY;} else if ry&lt;yy {ry=yy;} 
        if ry-MR&gt;yy {ry-=point_distance(ry,0,yy,0)/MY;} else if ry&gt;yy {ry=yy;}
    }
    else if type=4 { //follow-target cam
        xx=target.x-mx/2;  yy=target.y-my/2;
        if rx+MR&lt;xx {rx+=point_distance(rx,0,xx,0)/MX;} else if rx&lt;xx {rx=xx;}
        if rx-MR&gt;xx {rx-=point_distance(rx,0,xx,0)/MX;} else if rx&gt;xx {rx=xx;}
        if ry+MR&lt;yy {ry+=point_distance(ry,0,yy,0)/MY;} else if ry&lt;yy {ry=yy;} 
        if ry-MR&gt;yy {ry-=point_distance(ry,0,yy,0)/MY;} else if ry&gt;yy {ry=yy;}
    }
}

/*
if 0&gt;rx {rx=0;}
if rx&gt;room_width-mx {rx=room_width-mx;}
if 0&gt;ry {ry=0;}
if ry&gt;room_height-my {ry=room_height-my;}
*/

sx=0; sy=0;
if (0&lt;stime || stime==-1) &amp;&amp; 0&lt;shake {
    if stime==-1 {shake--;}
    else {
        stime--;
        if shake&lt;3 shake=3;
    }
    sx=irandom_range(shake-2,shake)*choose(-1,1);
    sy=irandom_range(shake-2,shake)*choose(-1,1);
} else shake=0;

rx = clamp(rx,xmin,xmax);
ry = clamp(ry,ymin,ymax);
event_user(0);

x=rx+sx+400;
y=ry+sy+304;

/*
x=clamp(x,0,room_width)+304;
y=clamp(y,0,room_height)+400;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///View-Fade
fade_set=clamp(fade_set+fade_get,0,1);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Angle
view_angle=view_angle mod 360;

if (Toangle!=view_angle &amp;&amp; mvang&lt;=0) mvang=abs(view_angle-Toangle);
if 0&lt;mvang {
    view_angle+=20;
    mvang-=20;
}

if mvang&lt;0 {
    with(Me) {hspeed=0; vspeed=0;}
    view_angle+=mvang;
    mvang=0;
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Optimization

with(all) {
    if object_index==sys_global
    || object_index==sys_part
    || object_index==sys_record
    || object_index==sys_lighting
    
    || object_index==obj_temp
    || object_index==obj_teleport
    || object_index==obj_trigger
    || object_index==obj_text
    || object_index==obj_platform
    || object_index==obj_block
    || object_index==obj_banblock
    || object_index==sys_cam
    || object_index==obj_water
    || object_index==obj_GAMEOVER
    || object_index==obj_aqua
    || object_index==obj_jijin
    || object_index==obj_killblock
    || object_index==obj_platform2
    || object_index==obj_replay
    || object_index==obj_chain
    || object_index==obj_create_tpevent
    || object_index==obj_sin1event
    || object_index==obj_shift
    || object_index==obj_ignis
    || object_index==obj_towerbackground
    {} else if point_distance(other.x+400,other.y+308,x,y)&lt;1600 {visible=1;}
    else {visible=0;}
}
with(obj_block_tower)
    if point_distance(other.x+400,other.y+308,x,y)&lt;1600 {visible=1;}
    else {visible=0;}
if vismask 
{
    with(all) visible=1;
    image_alpha = 1.0;
}






</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Background
if FollowBG {
    background_x[0]=x-400;
    background_y[0]=y-304;
}
if 1&lt;SMOOTHBG_X background_x[0]=x div SMOOTHBG_X-400;
if 1&lt;SMOOTHBG_Y background_y[0]=y div SMOOTHBG_Y-304;
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="7" enumb="10">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>rx=clamp(rx,0,room_width-800);
ry=clamp(ry,0,room_height-608);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="73">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var rx, ry;
rx=view_xview;
ry=view_yview;

draw_set_alpha(fade_set);
draw_rectangle_colour(rx,ry,rx+view_wview,ry+view_hview,fade_col,fade_col,fade_col,fade_col,0);
draw_set_alpha(1);
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
